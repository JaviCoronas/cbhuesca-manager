---
import { getAllGalleries, getAllImages, IGallery } from "../pages/api/images";
import GlobalLayout from "../layouts/GlobalLayout.astro";
import { Image } from "astro:assets";

const pageTitle = "GalerÃ­a de fotos";
export const prerender = true;

export async function getStaticPaths() {
  const galleries = await getAllGalleries();
  return galleries!.map((entry) => ({
    params: { slug: entry.gallery_shared_folder },
    props: { entry },
  }));
}

const galleries = await getAllGalleries();
---

<GlobalLayout pageTitle={pageTitle}>
  <div class="bg-slate-200">
    <div
      class="flex flex-col h-30 items-center justify-center bg-cover bg-center"
      style="background-image: url('/assets/aboutHeader.webp');"
    >
      <div class="flex-none">
        <div class="flex flex-col items-center justify-center h-36 md:h-96">
          <h1
            class="text-3xl md:text-5xl lg:text-6xl text-white font-sans font-extrabold text-center mb-4 z-10"
          >
            {pageTitle.toUpperCase()}
          </h1>
          <p class="text-lg text-white text-center z-10 font-sans"></p>
        </div>
      </div>
    </div>
    <div class="flex flex-wrap">
      {
        galleries?.map((element: IGallery) => (
          <a
            class="flex flex-col items-center justify-center w-96 m-5 rounded-xl hover:cursor-pointer shadow-lg bg-white"
            href={`/gallery/${element.gallery_shared_folder}`}
          >
            <Image
              src={element.thumbnail}
              alt={`Thumbnail ${element.thumbnail}`}
              width={450}
              height={300}
              style={{ objectFit: "cover", borderRadius: "10px" }}
            />
            <h4 class="font-sans text-xl p-3">{element.name}</h4>
          </a>
        ))
      }
    </div>
  </div>
</GlobalLayout>
